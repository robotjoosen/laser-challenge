<!doctype html>
<html>
<head>
    <title>{% block title %}Laser Challenge{% endblock %}</title>
    <link rel="stylesheet" href="/assets/theme/css/style.css">
    <link href="https://fonts.googleapis.com/css?family=Teko:700|Titillium+Web|VT323&display=swap" rel="stylesheet">

    {% block stylesheets %}
    {% endblock %}

    {% block javascripts %}
    {% endblock %}
</head>
<body>
<div class="container">
    <div class="row">
        <div class="col-12">
            <br>
        </div>
        <div class="col-12">
            <div class="card">
                <div class="card-header">
                    <ul class="nav nav-tabs card-header-tabs">
                        <li class="nav-item">
                            <a class="nav-link active" data-toggle="tab" href="#tab-game" role="tab" aria-controls="game" aria-selected="false">Game</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" data-toggle="tab" href="#tab-score" role="tab" aria-controls="score" aria-selected="false">Score</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" data-toggle="tab" href="#tab-devices" role="tab" aria-controls="devices" aria-selected="true">Devices</a>
                        </li>
                    </ul>
                </div>
                <div class="card-body">
                    <div class="tab-content">
                        {% verbatim %}
                        <!-- Game -->
                        <div class="tab-pane fade show active" id="tab-game" role="tabpanel" aria-labelledby="score-tab">
                            <div id="game-panel"></div>
                            <script id="game-panel-begin-tmpl" type="x-tmpl-mustache">
                                <section class="text-center pt-4 pb-4">
                                    <h1>Laser Challenge</h1>
                                    <p class="lead">Super awesome lasertag game! Get ready to play!</p>
                                    <p><button class="btn btn-lg btn-primary" id="game-start">Start game</button></p>
                                </section>
                            </script>
                            <script id="game-panel-play-tmpl" type="x-tmpl-mustache">
                                <section class="text-center pt-2 pb-2">
                                    <h1 class="display-2">Game on!</h1>
                                    <p class="display-1">{{timer}}</p>
                                        <table class="table">
                                            <thead>
                                                <tr>
                                                    <th>ID</th>
                                                    <th>Name</th>
                                                    <th>Hits</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                {{#device}}
                                                    <tr>
                                                        <th>{{id}}</th>
                                                        <td>{{name}}</td>
                                                        <td>{{hit}}</td>
                                                    </tr>
                                {{/device}}
                                </tbody>
                            </table>
                        </section>
                            </script>
                            <script id="game-panel-end-tmpl" type="x-tmpl-mustache">
                                <section class="text-center pt-2 pb-2">
                                    <div class="row align-items-center">
                                        <div class="col text-right">
                                            <button class="btn btn-primary" id="game-restart">Restart game</button>
                                        </div>
                                    </div>
                                    <h1 class="display-2">Game over!</h1>
                                    <p class="display-1">{{stats.display_time}}</p>
                                        <table class="table">
                                            <thead>
                                                <tr>
                                                    <th>ID</th>
                                                    <th>Name</th>
                                                    <th>Hits</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                {{#device}}
                                                    <tr>
                                                        <th>{{id}}</th>
                                                        <td>{{name}}</td>
                                                        <td>{{hit}}</td>
                                                    </tr>
                                {{/device}}
                                </tbody>
                            </table>
                        </section>
                            </script>
                        </div>

                        <!-- Score -->
                        <div class="tab-pane fade show" id="tab-score" role="tabpanel" aria-labelledby="score-tab">
                            <section class="pt-4 pb-4">
                                <h1>Top Score</h1>
                                <table id="score-table" class="table">
                                    <thead>
                                    <tr>
                                        <th>ID</th>
                                        <th>Hits</th>
                                        <th>Devices</th>
                                        <th>Time</th>
                                    </tr>
                                    </thead>
                                    <tbody id="games-row">
                                    <tr>
                                        <td colspan="3">Loading scores...</td>
                                    </tr>
                                    </tbody>
                                </table>
                                <script id="games-row-tmpl" type="x-tmpl-mustache">
                                        {{#games}}
                                            <tr>
                                                <th scope="row">{{id}}</td>
                                                <td>{{hits}}</td>
                                                <td>{{devices}}</td>
                                                <td>{{display_time}}</td>
                                            </tr>
                                    {{/games}}
                                    </script>
                            </section>
                        </div>

                        <!-- Devices -->
                        <div class="tab-pane fade show" id="tab-devices" role="tabpanel" aria-labelledby="devices-tab">
                            <section class="pt-4 pb-4">
                                <div class="row mb-2 align-items-center">
                                    <div class="col-6">
                                        <h1 class="mb-0">Devices</h1>
                                    </div>
                                    <div class="col-6 text-right">
                                        <button class="btn btn-dark" id="devices-refresh">0s</button>
                                    </div>
                                </div>
                                <table class="table">
                                    <thead>
                                    <tr>
                                        <th>Name</th>
                                        <th>IP</th>
                                        <th>Hits</th>
                                        <th>State</th>
                                        <th>Created On</th>
                                    </tr>
                                    </thead>
                                    <tbody id="devices-row">
                                    <tr>
                                        <td colspan="3">Loading devices...</td>
                                    </tr>
                                    </tbody>
                                </table>
                                <script id="devices-row-tmpl" type="x-tmpl-mustache">
                                        {{#devices}}
                                            <tr>
                                                <td>{{name}}</td>
                                                <td>{{ip}}</td>
                                                <td>{{hits}}</td>
                                                <td>{{state}}</td>
                                                <td>{{createdon}}</td>
                                            </tr>
                                    {{/devices}}
                                    </script>
                            </section>
                        </div>
                        {% endverbatim %}
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="/assets/theme/js/script.js"></script>
</body>
</html>
